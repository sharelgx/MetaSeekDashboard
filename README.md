# MetaSeek Dashboard

MetaSeekOJ æœ¬åœ°åŒ–è¿ç»´ä»ªè¡¨ç›˜ (Ops Dashboard)

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª **"MetaSeekOJ æœ¬åœ°åŒ–è¿ç»´ä»ªè¡¨ç›˜" (Ops Dashboard)**ã€‚
å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è®©å¼€å‘è€…åœ¨æœ¬åœ°æœºå™¨ (WSL2/Linux) ä¸Šï¼Œé€šè¿‡å¯è§†åŒ–ç•Œé¢ç®¡ç†è¿œç¨‹è…¾è®¯äº‘æœåŠ¡å™¨ (Ubuntu)ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
*   **ç³»ç»Ÿç›‘æ§**: æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ CPU/å†…å­˜ã€SSH è¿æ¥çŠ¶æ€ã€æ ¸å¿ƒæœåŠ¡ (Django, Nginx, Judge) å¥åº·åº¦ã€‚
*   **ä»£ç å‘å¸ƒ**: æœ¬åœ°æ„å»ºå‰ç«¯ (React/Vue)ï¼Œå¹¶ä¸€é”® rsync åŒæ­¥ä»£ç åˆ°è¿œç¨‹ã€‚
*   **æœåŠ¡ç®¡ç†**: é‡å¯åç«¯ã€Nginxï¼Œä¿®å¤ Scratch ç¼–è¾‘å™¨ç­‰ã€‚
*   **æ—¥å¿—ç›‘æ§**: å®æ—¶æŸ¥çœ‹è¿œç¨‹æ—¥å¿—æ–‡ä»¶ã€‚

## æŠ€æœ¯æ¶æ„

é¡¹ç›®é‡‡ç”¨ **å‰åç«¯åˆ†ç¦»** æ¶æ„ï¼Œé€šè¿‡æœ¬åœ° Loopback é€šä¿¡ï¼š

```
React å‰ç«¯ -- HTTP API --> FastAPI åç«¯ -- Python è°ƒç”¨ --> MCP æ ¸å¿ƒé€»è¾‘ -- SSH / Rsync --> è¿œç¨‹è…¾è®¯äº‘æœåŠ¡å™¨
```

### å‰ç«¯ (Frontend)
*   **è·¯å¾„**: `/frontend`
*   **æŠ€æœ¯æ ˆ**: React 18, Vite, Tailwind CSS, Shadcn UI, Lucide Icons.
*   **å…³é”®æ–‡ä»¶**:
    *   `src/app/components/pages/*`: å„ä¸ªåŠŸèƒ½é¡µé¢ (Dashboard, Deployment, Services, Logs).
    *   `src/lib/api.ts`: Axios å°è£…ï¼Œå¤„ç†ä¸åç«¯é€šä¿¡ã€‚
    *   `vite.config.ts`: é…ç½®äº† `/api` ä»£ç†è½¬å‘åˆ°åç«¯ `8000` ç«¯å£ã€‚

### åç«¯ (Backend)
*   **è·¯å¾„**: `/backend`
*   **æŠ€æœ¯æ ˆ**: Python FastAPI, Uvicorn.
*   **èŒè´£**: ä½œä¸º API ç½‘å…³ï¼Œæ¥æ”¶å‰ç«¯è¯·æ±‚ï¼Œè°ƒç”¨åº•å±‚çš„è¿ç»´è„šæœ¬ã€‚
*   **å…³é”®æ–‡ä»¶**:
    *   `main.py`: å®šä¹‰ API è·¯ç”± (`/api/status`, `/api/sync`, `/api/restart` ç­‰)ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆPostgreSQL + åç«¯ + å‰ç«¯ï¼‰
bash start.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡
bash stop.sh

# å¥åº·æ£€æŸ¥
bash check_health.sh
```

å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… å¯åŠ¨ PostgreSQL æ•°æ®åº“
2. âœ… åˆå§‹åŒ–æ•°æ®åº“ï¼ˆå¦‚æœæœªåˆå§‹åŒ–ï¼‰
3. âœ… æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
4. âœ… å¯åŠ¨åç«¯æœåŠ¡ (http://localhost:8000)
5. âœ… å¯åŠ¨å‰ç«¯æœåŠ¡ (http://localhost:5173)

### æ‰‹åŠ¨å¯åŠ¨

å¦‚æœéœ€è¦æ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡ï¼Œè¯·å‚è€ƒ [å¯åŠ¨æŒ‡å—](START_GUIDE.md)

#### å¯åŠ¨åç«¯
```bash
cd backend
python main.py
# æœåŠ¡å°†è¿è¡Œåœ¨ http://0.0.0.0:8000
```

#### å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm run dev
# æœåŠ¡å°†è¿è¡Œåœ¨ http://localhost:5173
```

è®¿é—®æµè§ˆå™¨: **http://localhost:5173**

## ğŸ“ é¡¹ç›®ç»“æ„

```
Opsdashboarddesignspec/
â”œâ”€â”€ frontend/          # React å‰ç«¯åº”ç”¨
â”œâ”€â”€ backend/           # FastAPI åç«¯æœåŠ¡
â”œâ”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ DESIGN_OpsDashboard.md  # è®¾è®¡è§„èŒƒæ–‡æ¡£
â”œâ”€â”€ start.sh           # ä¸€é”®å¯åŠ¨è„šæœ¬ â­
â”œâ”€â”€ stop.sh            # åœæ­¢æ‰€æœ‰æœåŠ¡è„šæœ¬ â­
â”œâ”€â”€ check_health.sh    # å¥åº·æ£€æŸ¥è„šæœ¬ â­
â”œâ”€â”€ START_GUIDE.md     # è¯¦ç»†å¯åŠ¨æŒ‡å—
â”œâ”€â”€ HANDOVER.md        # é¡¹ç›®äº¤æ¥æ–‡æ¡£
â””â”€â”€ README.md          # æœ¬æ–‡ä»¶
```

## ğŸ“š æ–‡æ¡£

- [å¯åŠ¨æŒ‡å—](START_GUIDE.md) - è¯¦ç»†çš„å¯åŠ¨æ­¥éª¤å’Œæ•…éšœæ’æŸ¥
- [è®¾è®¡è§„èŒƒæ–‡æ¡£](docs/DESIGN_OpsDashboard.md) - UI/UX è®¾è®¡è§„èŒƒ
- [é¡¹ç›®äº¤æ¥æ–‡æ¡£](HANDOVER.md) - é¡¹ç›®äº¤æ¥è¯´æ˜
- [PostgreSQLé…ç½®æŒ‡å—](backend/POSTGRESQL_SETUP.md) - æ•°æ®åº“é…ç½®
- [SSHè¿æ¥æŒ‡å—](backend/SSH_CONNECTION_GUIDE.md) - SSHé…ç½®è¯´æ˜

## ğŸ”§ å¸¸ç”¨è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `start.sh` | ä¸€é”®å¯åŠ¨ | å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆPostgreSQLã€åç«¯ã€å‰ç«¯ï¼‰ |
| `stop.sh` | åœæ­¢æœåŠ¡ | åœæ­¢æ‰€æœ‰è¿è¡Œçš„æœåŠ¡ |
| `check_health.sh` | å¥åº·æ£€æŸ¥ | æ£€æŸ¥é¡¹ç›®ä¾èµ–å’ŒæœåŠ¡çŠ¶æ€ |
| `backend/start_backend.sh` | å¯åŠ¨åç«¯ | ä»…å¯åŠ¨åç«¯æœåŠ¡ |
| `backend/setup_database.sh` | æ•°æ®åº“åˆå§‹åŒ– | åˆå§‹åŒ–PostgreSQLæ•°æ®åº“ |
| `backend/start_postgresql.sh` | å¯åŠ¨PostgreSQL | ä»…å¯åŠ¨PostgreSQLæœåŠ¡ |

## ğŸŒ æœåŠ¡åœ°å€

- **å‰ç«¯**: http://localhost:5173
- **åç«¯API**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **PostgreSQL**: localhost:5432

## ğŸ” é»˜è®¤ç™»å½•å‡­æ®

- ç”¨æˆ·å: `admin` æˆ– `root`
- å¯†ç : `123456`

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **MCP ä¾èµ–**: åç«¯éœ€è¦ä¾èµ– `mcp-servers/code-sync/server.py` ä¸­çš„ `CodeSyncMCP` ç±»ã€‚å¦‚æœä» MetaSeekOJdev ä¸­å‰¥ç¦»ï¼Œéœ€è¦ç¡®ä¿è¯¥ä¾èµ–å¯ç”¨æˆ–è¿›è¡Œç›¸åº”è°ƒæ•´ã€‚

2. **å®‰å…¨æ€§**: ç›®å‰åç«¯ API æ²¡æœ‰ä»»ä½•é‰´æƒ (CORS å¼€æ”¾)ï¼Œä»…é™æœ¬åœ° `localhost` ä½¿ç”¨ã€‚å¦‚æœæš´éœ²åˆ°å…¬ç½‘éœ€åŠ  Token éªŒè¯ã€‚

3. **é…ç½®ç®¡ç†**: æœåŠ¡å™¨é…ç½®ä¿å­˜åœ¨ PostgreSQL æ•°æ®åº“ä¸­ï¼ŒåŒ…å« SSH å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚

4. **PostgreSQL**: å¯åŠ¨è„šæœ¬ä¼šå°è¯•è‡ªåŠ¨å¯åŠ¨ PostgreSQLï¼Œä½†å¯èƒ½éœ€è¦ sudo æƒé™ã€‚å¦‚æœè‡ªåŠ¨å¯åŠ¨å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ‰§è¡Œï¼š
   ```bash
   sudo service postgresql start
   ```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Python**: >= 3.8
- **Node.js**: >= 18
- **PostgreSQL**: >= 12
- **æ“ä½œç³»ç»Ÿ**: Linux/WSL2

## License

[å¾…å®š]
