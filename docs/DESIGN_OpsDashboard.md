# MetaSeekOJ 运维仪表盘 (Ops Dashboard) 设计规范

## 1. 项目概述

本设计规范用于指导 MetaSeekOJ 远程服务器管理系统的 UI/UX 设计。该系统运行在开发者本地，旨在将复杂的命令行运维操作转化为直观、可视化的图形界面。

**核心目标**:

* **可视化**: 状态一目了然，拒绝黑屏终端。

* **实时性**: 构建进度、服务健康度实时反馈。

* **安全性**: 关键操作二次确认，防止误触。

## 2. 页面架构与功能模块

### 2.1 仪表盘首页 (Dashboard Home)

**功能**: 全局概览，核心状态监控。

* **Header 区域**:

  * **服务器选择器 (Server Selector)**: 下拉菜单选择目标服务器 (e.g., `腾讯云生产环境`, `旧服务器`)。

  * **连接状态 (Connection Status)**: 实时连接指示灯 (🟢 已连接 / 🔴 未连接) 及延迟 (ms)。

* **系统健康卡片 (System Health)**:

  * 展示远程服务器基础资源：CPU 使用率、内存占用、磁盘空间。

  * *设计建议*: 使用环形进度条或波浪图展示使用率。

* **核心服务矩阵 (Core Services Matrix)**:

  * 以 "红绿灯" 风格展示关键服务状态：

    * `Django 后端` (端口 8086)

    * `Nginx 代理` (端口 80/443)

    * `判题服务器` (Docker 容器)

    * `Redis` & `PostgreSQL`

  * *交互*: 点击卡片可跳转至该服务的详情/日志页面。

* **快捷操作区 (Quick Actions)**:

  * 放置高频操作按钮：`刷新状态`, `重启后端`, `一键同步并重启`。

### 2.2 部署控制台 (Deployment Center)

**功能**: 代码发布与构建管理。

* **本地构建面板 (Build Panel)**:

  * **标签页**: 切换 `Vue 后台` / `React 前端`。

  * **配置项**:

    * `内存限制`: 滑块或输入框 (默认 8192MB)，用于防止 WSL 内存溢出。

    * `增量构建`: 开关 (增量构建)。

  * **操作**: `开始构建` 大按钮。

  * **反馈**: 必须包含 **进度条** 和 **可折叠的实时日志窗口**。

* **代码同步面板 (Sync Panel)**:

  * **范围选择**: 单选框 `全部`, `仅后端`, `仅前端`。

  * **操作**: `同步到远程` 按钮。

  * **状态**: 同步中动画、成功/失败 Toast 提示。

### 2.3 服务管理详情 (Service Manager)

**功能**: 精细化控制每个服务。

* **服务列表 (Service List)**:

  * **列**: 服务名称、PID、运行时间、状态、操作列。

  * **操作**:

    * `启动` (播放图标)

    * `停止` (停止图标)

    * `重启` (刷新图标)

    * `日志` (文档图标 - 点击查看日志)

* **修复工具 (Troubleshooting)**:

  * 独立的功能修复区，例如 `修复 Scratch 编辑器` (一键修复脚本) 和 `重载 Nginx`。

### 2.4 日志监控 (Log Viewer)

**功能**: 远程日志查看。

* **日志选择器**: 下拉选择日志源 (e.g., `后端错误日志`, `Nginx 访问日志`)。

* **查看区域**:

  * 黑色背景，类终端字体 (Monospace)。

  * **自动滚动**: 自动滚动开关。

  * **高亮**: 关键词高亮 (Error 标红, Warning 标黄)。

### 2.5 设置 (Settings)

**功能**: 管理服务器配置及系统设置。

* **添加/编辑服务器**:

  * **服务器 ID**: 唯一标识符 (如 `tencent_prod`)。

  * **服务器名称**: 显示名称<https://github.com/sharelgx/Opsdashboarddesignspec> (如 `腾讯云生产环境`)。

  * **主机 IP**: 远程服务器 IP 地址。

  * **用户名**: SSH 登录用户名 (如 `ubuntu`)。

  * **密码**: SSH 登录密码 (**用于自动登录和执行命令**)。

  * **项目路径**: 远程服务器上的项目根目录 (如 `/home/ubuntu/MetaSeekOJ`)。

* **操作**:

  * `保存配置`: 保存当前表单内容。

  * `测试连接`: 尝试使用当前凭据登录并执行 `whoami` 命令。

* **服务器列表**: 展示已保存的服务器，支持删除操作。

## 3. 交互与状态设计 (Interaction Guidelines)

### 3.1 按钮状态

* **默认**: 正常可点击。

* **加载中**: 显示 Spinner，文本变为 "处理中..."，**禁用点击**。

* **成功**: 瞬间变为绿色对勾，随后恢复。

* **错误**: 变为红色，并弹出错误详情 Tooltip。

### 3.2 反馈机制

* **耗时操作**: (如构建、同步) 必须展示进度条或明确的加载动画，不能让用户以为死机。

* **危险操作**: (如停止数据库) 必须有 Modal 弹窗进行二次确认。

* **通知**: 右上角 Toast 通知 (Info, Success, Warning, Error)。

### 3.3 布局适配

* **桌面优先**: 优先适配宽屏桌面 (1440px+)。

* **侧边导航**: 左侧固定导航栏，包含 仪表盘, 部署中心, 服务管理, 日志监控, 设置。

## 4. 风格建议 (Style Guide)

* **主题**: 深色模式 (Dark Mode)，符合开发者/运维工具的专业感。

* **配色**:

  * **主色**: 品牌色 (建议蓝紫色系)。

  * **成功**: `#10B981` (翠绿)。

  * **警告**: `#F59E0B` (琥珀色)。

  * **错误**: `#EF4444` (红色)。

  * **背景**: `#1F2937` (深灰)。

* **字体**: 标题使用无衬线字体 (Inter/Roboto)，代码和日志使用等宽字体 (JetBrains Mono/Fira Code)。

